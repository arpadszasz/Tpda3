# Screen settings
# Style: default or report
<screen>
  name                  = orders
  description           = Orders
  style                 = default
  geometry              = 715x490+20+20
  <details/>
</screen>

# Report bound to the print toolbar button of the Screen
<defaultreport/>

# Document template bound to the edit toolbar button of the Screen
<defaultdocument/>

# Data source for list widgets (JCombobox)
<lists_ds>
  <statuscode>
    table               = status
    code                = code
    name                = description
    default             = not set
  </statuscode>
</lists_ds>

# Column names in the 'List' tab table; the order is preserved
# Force array of single elements by surrounding the value of the
# config entry by []
<list_header>
   lookup               = [ ordernumber ]
   column               = customername
   column               = orderdate
   column               = requireddate
   column               = shippeddate
</list_header>

# Define bindings for Entry widgets mapped to fields. Multiple fields
# are allowed.  Force array of single field elements by surrounding
# the value of the config entry with [].
<bindings>
  <customer>
    table               = customers
    search              = customername
    field               = [ customernumber ]
  </customer>
</bindings>

# Interdependency's
# conditions: value => state
<dependencies/>

# Define bindings for TM cells. Multiple fields can be added
# Force array of single elements for 'field' by surrounding the value
# of the config entry by []
<tablebindings tm1>
  <lookup>
    <products>
      bindcol           = 1
      table             = products
      search            = productname
      field             = [ productcode ]
    </products>
  </lookup>
  <method>
    <article>
      bindcol           = 4
      subname           = calculate_order_line
    </article>
  </method>
</tablebindings>

# Table attributes
# Main table
<maintable>
  name                  = orders
  generator             = generator_name
  view                  = v_orders
  <pkcol>
    width               = 6
    name                = ordernumber
    label               = Order
  </pkcol>
  <columns>
    <customername>
      ctrltype          = e
      bgcolor           = lightgreen
      findtype          = contains
      numscale          = 0
      state             = normal
      readwrite         = ro
      label             = Customer
      width             = 30
      coltype           = alphanumplus
    </customername>
    <customernumber>
      ctrltype          = e
      bgcolor           = lightgrey
      findtype          = full
      numscale          = 0
      state             = disabled
      readwrite         = rw
      label             = CustId
      width             = 6
      coltype           = integer
    </customernumber>
    <ordernumber>
      ctrltype          = e
      bgcolor           = lightgrey
      findtype          = full
      numscale          = 0
      state             = disabled
      readwrite         = rw
      label             = Order
      width             = 6
      coltype           = alphanum
    </ordernumber>
    <orderdate>
      ctrltype          = d
      bgcolor           = white
      findtype          = date
      numscale          = 0
      state             = normal
      readwrite         = rw
      label             = Order date
      width             = 12
      coltype           = date
    </orderdate>
    <requireddate>
      ctrltype          = d
      bgcolor           = white
      findtype          = date
      numscale          = 0
      state             = normal
      readwrite         = rw
      label             = Req date
      width             = 12
      coltype           = date
    </requireddate>
    <shippeddate>
      ctrltype          = d
      bgcolor           = white
      findtype          = date
      numscale          = 0
      state             = normal
      readwrite         = rw
      label             = Shipped date
      width             = 12
      coltype           = date
    </shippeddate>
    <statuscode>
      ctrltype          = m
      bgcolor           = white
      findtype          = full
      numscale          = 0
      state             = normal
      readwrite         = rw
      label             = Statuscode
      width             = 6
      coltype           = alphanum
    </statuscode>
    <comments>
      ctrltype          = t
      bgcolor           = white
      findtype          = contains
      numscale          = 0
      state             = normal
      readwrite         = rw
      label             = Comments
      width             = none
      coltype           = alphanumplus
    </comments>
    <ordertotal>
      ctrltype          = e
      bgcolor           = white
      findtype          = full
      numscale          = 2
      state             = normal
      readwrite         = rw
      label             = Order total
      width             = 12
      coltype           = numeric
    </ordertotal>
  </columns>
</maintable>

# Dependent tables with TableMatrix designator
<deptable tm1>
  name                  = orderdetails
  generator             = generator_name
  view                  = v_orderdetails
  updatestyle           = delete+add
  selectorcol           =
  colstretch            = 2
  orderby               = orderlinenumber
  <pkcol>
    width               = 6
    name                = ordernumber
    label               = Order
  </pkcol>
  <fkcol>
    width               = 6
    name                = orderlinenumber
    label               = OrderLn
  </fkcol>
  <toolbar>
    <tb2ad>
      id                = 2001
      type              = _item_normal
      icon              = actitemadd16
      tooltip           = Add row
      help              = Add new row in table
      sep               = none
      method            = tmatrix_add_row
      <state>
        <rec>
          idle          = disabled
          add           = normal
          edit          = normal
          find          = disabled
          sele          = disabled
        </rec>
        <det>
          idle          = disabled
          add           = normal
          edit          = normal
          find          = disabled
          sele          = disabled
        </det>
      </state>
    </tb2ad>
    <tb2rm>
      id                = 2002
      type              = _item_normal
      icon              = actitemdelete16
      tooltip           = Remove row
      help              = Remove row from table
      sep               = none
      method            = tmatrix_remove_row
      <state>
        <rec>
          idle          = disabled
          add           = normal
          edit          = normal
          find          = disabled
          sele          = disabled
        </rec>
        <det>
          idle          = disabled
          add           = normal
          edit          = normal
          find          = disabled
          sele          = disabled
        </det>
      </state>
    </tb2rm>
  </toolbar>
  <columns>
    <orderlinenumber>
      id                = 0
      label             = Art
      width             = 5
      readwrite         = rw
      tag               = ro_center
      numscale          = 0
      coltype           = integer
    </orderlinenumber>
    <productcode>
      id                = 1
      label             = Code
      width             = 15
      readwrite         = rw
      tag               = find_center
      numscale          = 0
      coltype           = alphanum
    </productcode>
    <productname>
      id                = 2
      label             = Product
      width             = 36
      readwrite         = ro
      tag               = ro_left
      numscale          = 0
      coltype           = alphanumplus
    </productname>
    <quantityordered>
      id                = 3
      label             = Quantity
      width             = 12
      readwrite         = rw
      tag               = enter_right
      numscale          = 0
      coltype           = numeric
    </quantityordered>
    <priceeach>
      id                = 4
      label             = Price
      width             = 12
      readwrite         = rw
      tag               = enter_right
      numscale          = 2
      coltype           = numeric
    </priceeach>
    <ordervalue>
      id                = 5
      label             = Value
      width             = 12
      readwrite         = ro
      tag               = ro_right
      numscale          = 2
      coltype           = numeric
    </ordervalue>
  </columns>
</deptable>

# Change main toolbar behavior
<toolbar/>
